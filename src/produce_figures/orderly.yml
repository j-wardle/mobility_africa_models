script: produce_figures.R

artefacts:
  - staticgraph:
      description: Figures of times to peak and first cases
      filenames:
        - figures/peak_scatter_small.png
        - figures/peak_scatter_small_cri.png
        - figures/first_case_scatter_small.png
        - figures/first_case_scatter_small_cri.png
  - data:
      description: Spearman rank test output
      filenames:
        - figures/spearman_first_case_small.csv
        - figures/spearman_peak_small.csv
        - figures/spearman_first_case_big.csv
        - figures/spearman_peak_big.csv
        
parameters:
  - folder

packages:
  - dplyr
  - tidyr
  - ggplot2
  - purrr
  - stringr
  - patchwork
  
depends:
  collate_outputs:
    id: latest(parameter:folder == folder)
    use:
      collated_time_to_peak.rds: collated_time_to_peak.rds
      collated_time_to_first_case.rds: collated_time_to_first_case.rds
  process_location_data:
    id: latest
    use:
      portugal_location_data.rds: portugal_location_data.rds
      portugal_aggr_location_data.rds: portugal_adm1_location_data.rds
      france_location_data.rds: france_location_data.rds
      france_aggr_location_data.rds: france_adm2_location_data.rds